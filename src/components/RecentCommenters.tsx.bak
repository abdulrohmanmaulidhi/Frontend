import React from "react";
import starIcon from "../assets/icon/star.png";

interface Commenter {
  avatar: string;
  name: string;
  rating: number;
}

interface RecentCommentersProps {
  commenters: Commenter[];
}

function Header() {
  return (
    <div className="bg-[#b49de4] h-[77px] rounded-tl-[20px] rounded-tr-[20px] w-full flex items-center">
      <div className="px-[21px] py-[10px] w-full">
        <p className="font-['Inter:Bold',sans-serif] font-bold text-[24px] text-white">
          Pengomentar Terbaru
        </p>
      </div>
    </div>
  );
}

function Profile({ avatar, name }: { avatar: string; name: string }) {
  return (
    <div className="w-[61px] h-[61px] relative flex-shrink-0">
      <img
        src={avatar}
        alt={name}
        className="w-full h-full rounded-full object-cover"
      />
    </div>
  );
}

function NameSection({ name }: { name: string }) {
  return (
    <div className="w-full">
      <p className="font-['Inter:Bold',sans-serif] font-bold text-[#444444] text-[24px]">
        {name}
      </p>
    </div>
  );
}

function Star() {
  return (
    <div className="w-[21.5px] h-[21.5px]">
      <img src={starIcon} alt="star" className="w-full h-full object-contain" />
    </div>
  );
}

function RatingSection({ rating }: { rating: number }) {
  return (
    <div className="flex items-center gap-2">
      <Star />
      <p className="font-['Inter:Medium',sans-serif] font-medium text-[#444444] text-[20px]">
        {rating.toFixed(1)}
      </p>
    </div>
  );
}

function TimeAgoSection({ timeAgo }: { timeAgo: string }) {
  return (
    <p className="font-['Inter:Medium',sans-serif] font-medium text-[#a0a0a0] text-[20px]">
      {timeAgo}
    </p>
  );
}

function CommenterRow({ commenter }: { commenter: Commenter }) {
  return (
    <div className="flex items-center w-full px-[21px] py-[12px] gap-[8px]">
      <Profile avatar={commenter.avatar} name={commenter.name} />
      <div className="flex-1">
        <NameSection name={commenter.name} />
        <div className="flex items-center justify-between mt-1">
          <RatingSection rating={commenter.rating} />
          <TimeAgoSection timeAgo={/* placeholder */ ""} />
        </div>
      </div>
    </div>
  );
}

function Divider({ thin }: { thin?: boolean }) {
  return (
    <div
      className={`w-full h-[1px] ${thin ? "bg-white" : "bg-[#D9D9D9]"} my-[4px]`}
    />
  );
}

export default function RecentCommenters({ commenters }: RecentCommentersProps) {
  return (
    <div className="bg-white rounded-[20px] shadow-[0px_12px_16px_-4px_rgba(10,13,18,0.08),0px_4px_6px_-2px_rgba(10,13,18,0.03)] w-full overflow-hidden">
      <Header />
      {commenters.map((c, i) => (
        <div key={`${c.name}-${i}`}>
          <CommenterRow commenter={c} />
          {i === commenters.length - 1 ? <Divider thin /> : <Divider />}
        </div>
      ))}
    </div>
  );
}
